(self.webpackChunk_apwide_uikit=self.webpackChunk_apwide_uikit||[]).push([[3987],{"./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/cjs.js??clonedRuleSet-11.use[1]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/MarkdownEditor/KitMarkdownEditor.vue?vue&type=style&index=0&id=acf0b81c&prod&scoped=true&lang=css":(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/sourceMaps.js"),_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__),_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/runtime/api.js"),___CSS_LOADER_EXPORT___=__webpack_require__.n(_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__)()(_node_modules_storybook_builder_webpack5_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());___CSS_LOADER_EXPORT___.push([module.id,'\n.kit-markdown-editor[data-v-acf0b81c] {\n  width: 100%;\n}\n.kit-markdown-editor[data-v-acf0b81c] .CodeMirror-cursor {\n  border-left: 1px solid var(--kit-md-cursor-color);\n}\n\n/** PREVIEW */\n.kit-markdown-editor[data-v-acf0b81c] .editor-preview h1,\n.kit-markdown-editor[data-v-acf0b81c] .editor-preview h2,\n.kit-markdown-editor[data-v-acf0b81c] .editor-preview h3 {\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n.kit-markdown-editor[data-v-acf0b81c] .editor-preview p,\n.kit-markdown-editor[data-v-acf0b81c] .editor-preview ul,\n.kit-markdown-editor[data-v-acf0b81c] .editor-preview ol {\n  margin-bottom: 15px;\n}\n\n/** EDIT */\n.kit-markdown-editor[data-v-acf0b81c] .cm-header-1 {\n  margin-top: 0;\n  font-size: 22px;\n}\n.kit-markdown-editor[data-v-acf0b81c] .cm-header-2 {\n  margin-top: 0;\n  font-size: 18px;\n}\n.kit-markdown-editor[data-v-acf0b81c] .cm-header-3 {\n  margin-top: 0;\n  font-size: 16px;\n}\n.kit-markdown-editor[data-v-acf0b81c] .cm-link {\n  color: var(--kit-md-link-text);\n}\n.kit-markdown-editor[data-v-acf0b81c] .cm-url {\n  color: var(--kit-link-color);\n}\n.kit-markdown-editor[data-v-acf0b81c] .CodeMirror-line {\n  color: var(--kit-md-line-text);\n}\n.kit-markdown-editor[data-v-acf0b81c] .CodeMirror {\n  background: var(--kit-page-bg);\n}\n.kit-markdown-editor[data-v-acf0b81c] .editor-preview {\n  background: var(--kit-md-preview-bg);\n  color: var(--kit-md-line-text);\n}\n.kit-markdown-editor[data-has-status-bar=\'true\'][data-v-acf0b81c] .CodeMirror {\n  border-bottom: none;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n  padding: 5px;\n}\n.kit-markdown-editor[data-has-status-bar=\'true\'][data-v-acf0b81c] .editor-statusbar {\n  border: 1px solid var(--kit-md-status-bar-border);\n  border-top: none;\n  padding: 2px 2px;\n  background: inherit;\n}\n\n/** Editor style cancelling when not editing */\n.kit-markdown-editor[data-readonly=\'true\'][data-v-acf0b81c] .CodeMirror {\n  border: none !important;\n  padding: 0 !important;\n  background: none;\n}\n.kit-markdown-editor[data-readonly=\'true\'][data-v-acf0b81c] .editor-preview {\n  position: inherit;\n  background-color: transparent;\n  padding: 0;\n}\n.kit-markdown-editor[data-readonly=\'true\'][data-v-acf0b81c] .editor-preview p {\n  margin: 0;\n}\n.kit-markdown-editor[data-readonly=\'true\'][data-v-acf0b81c] .editor-preview p ~ p {\n  margin-top: 10px;\n}\n.kit-markdown-editor[data-readonly=\'true\'][data-v-acf0b81c] .editor-preview ul {\n  padding-left: 15px;\n}\n.kit-markdown-editor[data-readonly=\'true\'][data-v-acf0b81c] .editor-statusbar,\n.kit-markdown-editor[data-readonly=\'true\'][data-v-acf0b81c] .CodeMirror-scroll {\n  display: none;\n}\n.kit-markdown-editor[data-readonly=\'true\'][data-v-acf0b81c] .CodeMirror-vscrollbar {\n  display: none !important;\n}\n.kit-markdown-editor[data-readonly=\'false\'][data-v-acf0b81c] {\n  margin-bottom: 10px;\n}\n.kit-markdown-editor[data-v-acf0b81c] .kit-markdown-editor__status {\n  text-align: left;\n  display: flex;\n  gap: 5px;\n  align-items: flex-end;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  margin: 0;\n}\n.kit-markdown-editor[data-v-acf0b81c] .kit-markdown-editor__status > span {\n  padding-left: 5px;\n  padding-right: 5px;\n  min-width: auto;\n  margin: 0;\n}\n.kit-markdown-editor[data-v-acf0b81c] .kit-markdown-editor__error {\n  border-radius: 3px;\n  background-color: var(--kit-md-error-bg);\n  color: var(--kit-md-error-text);\n}\n[data-color-mode="dark"] .kit-markdown-editor[data-v-acf0b81c] .easymde-dropdown {\n  background: linear-gradient(to bottom right, var(--kit-md-toolbar-bg) 0%, var(--kit-md-toolbar-bg) 84%,\n    var(--kit-body-text) 50%, var(--kit-body-text) 100%);\n  border: 1px solid var(--kit-md-toolbar-bg);\n  border-radius: 3px;\n}\n[data-color-mode="dark"] .kit-markdown-editor[data-v-acf0b81c] .easymde-dropdown:hover {\n  background: linear-gradient(to bottom right, var(--kit-md-tool-hover-bg) 0%, var(--kit-md-tool-hover-bg) 84%,\n    var(--kit-body-text) 50%, var(--kit-body-text) 100%);\n}\n[data-color-mode="dark"] .kit-markdown-editor[data-v-acf0b81c] button {\n  border-color: var(--kit-md-tool-border);\n}\n[data-color-mode="dark"] .kit-markdown-editor[data-v-acf0b81c] button:hover {\n  background: var(--kit-md-tool-hover-bg);\n}\n[data-color-mode="dark"] .kit-markdown-editor[data-v-acf0b81c] button:active {\n  background: var(--kit-md-tool-click-bg);\n}\n[data-color-mode="dark"] .kit-markdown-editor[data-v-acf0b81c] button.active:active {\n  background: var(--kit-md-tool-click-bg);\n}\n[data-color-mode="dark"] .kit-markdown-editor[data-v-acf0b81c] button.active {\n  background: var(--kit-md-tool-active-bg);\n  color: var(--kit-md-tool-active-text);\n}\n[data-color-mode="dark"] .kit-markdown-editor[data-v-acf0b81c] button {\n  color: var(--kit-body-text);\n}\n[data-color-mode="dark"] .kit-markdown-editor[data-v-acf0b81c] .editor-toolbar {\n  background-color: var(--kit-md-toolbar-bg);\n}\n[data-color-mode="dark"] .kit-markdown-editor[data-v-acf0b81c] .editor-statusbar {\n  background-color: var(--kit-page-bg);\n}\n[data-color-mode="dark"] .kit-markdown-editor[data-v-acf0b81c] .editor-toolbar {\n  border-top: 1px solid var(--kit-md-border);\n  border-left: 1px solid var(--kit-md-border);\n  border-right: 1px solid var(--kit-md-border);\n}\n[data-color-mode="dark"] .kit-markdown-editor[data-v-acf0b81c] .CodeMirror {\n  border-top: 1px solid var(--kit-md-border);\n  border-left: 1px solid var(--kit-md-border);\n  border-right: 1px solid var(--kit-md-border);\n}\n[data-color-mode="dark"] .kit-markdown-editor[data-v-acf0b81c] .editor-statusbar {\n  border: 1px solid var(--kit-md-border);\n  border-top: none;\n}\n[data-color-mode="dark"] .kit-markdown-editor[data-v-acf0b81c] .editor-toolbar i.separator {\n  border-left: 1px solid var(--kit-md-border);\n  border-right: 1px solid transparent;\n}\n[data-color-mode="dark"] .kit-markdown-editor[data-v-acf0b81c] .editor-toolbar .easymde-dropdown-content {\n  background-color: var(--kit-md-toolbar-bg);\n}\n\n',"",{version:3,sources:["webpack://./src/components/MarkdownEditor/KitMarkdownEditor.vue"],names:[],mappings:";AAkPA;EACA,WAAA;AACA;AACA;EACA,iDAAA;AACA;;AAEA,aAAA;AACA;;;EAGA,gBAAA;EACA,mBAAA;AACA;AACA;;;EAGA,mBAAA;AACA;;AAEA,UAAA;AACA;EACA,aAAA;EACA,eAAA;AACA;AACA;EACA,aAAA;EACA,eAAA;AACA;AACA;EACA,aAAA;EACA,eAAA;AACA;AACA;EACA,8BAAA;AACA;AACA;EACA,4BAAA;AACA;AACA;EACA,8BAAA;AACA;AACA;EACA,8BAAA;AACA;AACA;EACA,oCAAA;EACA,8BAAA;AACA;AACA;EACA,mBAAA;EACA,4BAAA;EACA,6BAAA;EACA,YAAA;AACA;AAEA;EACA,iDAAA;EACA,gBAAA;EACA,gBAAA;EACA,mBAAA;AACA;;AAEA,8CAAA;AACA;EACA,uBAAA;EACA,qBAAA;EACA,gBAAA;AACA;AACA;EACA,iBAAA;EACA,6BAAA;EACA,UAAA;AACA;AACA;EACA,SAAA;AACA;AACA;EACA,gBAAA;AACA;AACA;EACA,kBAAA;AACA;AACA;;EAEA,aAAA;AACA;AACA;EACA,wBAAA;AACA;AAEA;EACA,mBAAA;AACA;AAEA;EACA,gBAAA;EACA,aAAA;EACA,QAAA;EACA,qBAAA;EACA,eAAA;EACA,yBAAA;EACA,SAAA;AACA;AAEA;EACA,iBAAA;EACA,kBAAA;EACA,eAAA;EACA,SAAA;AACA;AAEA;EACA,kBAAA;EACA,wCAAA;EACA,+BAAA;AACA;AAEA;EACA;wDACA;EACA,0CAAA;EACA,kBAAA;AACA;AAEA;EACA;wDACA;AACA;AAEA;EACA,uCAAA;AACA;AAEA;EACA,uCAAA;AACA;AAEA;EACA,uCAAA;AACA;AAEA;EACA,uCAAA;AACA;AAEA;EACA,wCAAA;EACA,qCAAA;AACA;AAEA;EACA,2BAAA;AACA;AACA;EACA,0CAAA;AACA;AAEA;EACA,oCAAA;AACA;AAEA;EACA,0CAAA;EACA,2CAAA;EACA,4CAAA;AACA;AAEA;EACA,0CAAA;EACA,2CAAA;EACA,4CAAA;AACA;AAEA;EACA,sCAAA;EACA,gBAAA;AACA;AAEA;EACA,2CAAA;EACA,mCAAA;AACA;AAEA;EACA,0CAAA;AAEA",sourcesContent:["<template>\n  <div class=\"kit-markdown-editor\" ref=\"container\" :data-readonly=\"readonly\" :data-has-status-bar=\"hasStatusBar\">\n    <textarea ref=\"me\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { nextTick, onMounted, onUnmounted, ref, unref, watch, watchEffect } from 'vue'\nimport DOMPurify from 'dompurify'\nimport EasyMDE from 'easymde'\nimport 'easymde/dist/easymde.min.css'\nimport { hasHeadings } from '@components/MarkdownEditor/utils'\n\nexport type ToolbarItem =\n  | 'heading'\n  | 'bold'\n  | 'italic'\n  | 'unordered-list'\n  | 'ordered-list'\n  | 'link'\n  | 'preview'\n  | 'code'\n  | 'image'\n  | '|'\n\ntype Props = {\n  value?: string\n  readonly?: boolean\n  placeholder?: string\n  toolbar?: ToolbarItem[]\n  sizeLimit?: number\n  minHeight?: number\n  dontSanitize?: boolean\n  autoFocus?: boolean\n  blurOnControlEnter?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  value: '',\n  autoFocus: false,\n  readonly: false,\n  placeholder: '',\n  toolbar: () => [\n    'heading',\n    'bold',\n    'italic',\n    'code',\n    '|',\n    'unordered-list',\n    'ordered-list',\n    '|',\n    'link',\n    'image',\n    '|',\n    'preview'\n  ],\n  minHeight: 300,\n  dontSanitize: false\n})\n\nconst emit = defineEmits<{\n  (event: 'input', data: string)\n  (event: 'blur', e: Event)\n  (event: 'focus', e: Event)\n  (event: 'ctrl-enter')\n}>()\n\nconst me = ref<HTMLDivElement>()\nconst container = ref<HTMLDivElement>()\nconst editor = ref<EasyMDE>()\nconst hasStatusBar = ref(false)\n\nfunction handleClickOutside(event) {\n  if (props.readonly) {\n    return\n  }\n  const { target } = event\n  if (!container.value) {\n    return\n  }\n  if (container.value.contains(target)) {\n    return\n  }\n  emit('blur', new FocusEvent('blur'))\n}\n\nfunction buildCharacterCounter(limit: number, propsToolbar?: ToolbarItem[]) {\n  function onUpdate(el: HTMLElement) {\n    const value = editor.value.value()\n    const count = value.length\n    const spans: Node[] = []\n\n    if (propsToolbar?.length && !propsToolbar.includes('heading')) {\n      const issues: string[] = []\n\n      if (!propsToolbar.includes('heading') && hasHeadings(value)) {\n        issues.push('headings')\n      }\n\n      if (issues.length) {\n        const span = document.createElement('span')\n        span.classList.add('kit-markdown-editor__error')\n        span.innerText = `Some markdown (${issues.join(', ')}) might lead to unexpected layouts`\n        spans.push(span)\n      }\n    }\n\n    if (limit) {\n      const span = document.createElement('span')\n      span.innerText = `${count}/${limit}`\n      if (count > limit) {\n        span.classList.add('kit-markdown-editor__error')\n      }\n      spans.push(span)\n    }\n    if (spans.length) {\n      el.replaceChildren(...spans)\n    }\n  }\n\n  return {\n    className: 'kit-markdown-editor__status',\n    onUpdate\n  }\n}\n\nonMounted(() => {\n  let toolbar = null\n  if (!props.readonly) {\n    toolbar = props.toolbar.map((item) => {\n      if (item === 'heading') {\n        return {\n          name: 'others',\n          className: 'fa fa-header',\n          title: 'Headings',\n          children: ['heading-1', 'heading-2', 'heading-3']\n        }\n      }\n      return item\n    })\n  }\n\n  const status: unknown[] = [buildCharacterCounter(props.sizeLimit, props.toolbar)]\n\n  hasStatusBar.value = status.length > 0\n  const minHeight = props.readonly ? '1em' : `${props.minHeight}px`\n\n  editor.value = new EasyMDE({\n    element: me.value,\n    minHeight,\n    placeholder: props.placeholder,\n    status,\n    spellChecker: false,\n    toolbar,\n    renderingConfig: {\n      singleLineBreaks: true,\n      codeSyntaxHighlighting: true,\n      sanitizerFunction: (renderedHTML) => {\n        if (props.dontSanitize) {\n          return renderedHTML\n        }\n        return DOMPurify.sanitize(renderedHTML)\n      }\n    }\n  })\n  editor.value.value(props.value)\n\n  updateEditor(true)\n})\n\nfunction onFocus() {\n  emit('focus', new FocusEvent('focus'))\n}\nfunction onChange() {\n  emit('input', editor.value.value().trim())\n}\nfunction onBlur() {\n  emit('focus', new FocusEvent('blur'))\n}\nfunction onKeyUp(a, event: KeyboardEvent) {\n  if (event.ctrlKey && event.code === 'Enter') {\n    emit('ctrl-enter')\n    onBlur()\n  }\n}\n\nasync function updateEditor(firstTime = false) {\n  const cm = unref(editor)\n  if (!cm || !cm.codemirror) {\n    return\n  }\n\n  cm.codemirror.off('change', onChange)\n  cm.codemirror.off('focus', onFocus)\n  cm.codemirror.off('blur', onBlur)\n  document.removeEventListener('click', handleClickOutside, { capture: true })\n\n  if (!props.readonly) {\n    document.addEventListener('click', handleClickOutside, { capture: true })\n    cm.codemirror.on('change', onChange)\n    cm.codemirror.on('focus', onFocus)\n    cm.codemirror.on('blur', onBlur)\n    cm.codemirror.on('keyup', onKeyUp)\n    if (props.autoFocus && firstTime) {\n      setTimeout(() => {\n        cm.codemirror.focus()\n        cm.codemirror.setCursor(cm.codemirror.lineCount(), 0)\n      }, 250)\n    }\n  } else {\n    await nextTick()\n    if (!cm.isPreviewActive()) {\n      EasyMDE.togglePreview(cm)\n    }\n  }\n  // This must happen after togglePreview\n  cm.codemirror.setOption('readOnly', props.readonly)\n}\n\nwatch(\n  () => props.value,\n  () => {\n    if (editor.value?.value().trim() !== props.value.trim()) {\n      editor.value.value(props.value)\n    }\n  }\n)\n\nwatchEffect(() => updateEditor())\n\nonUnmounted(() => {\n  document.removeEventListener('click', handleClickOutside, { capture: true })\n\n  if (editor.value) {\n    editor.value.cleanup()\n    editor.value.toTextArea()\n    editor.value = null\n  }\n})\n<\/script>\n\n<style scoped>\n.kit-markdown-editor {\n  width: 100%;\n}\n.kit-markdown-editor >>>  .CodeMirror-cursor {\n  border-left: 1px solid var(--kit-md-cursor-color);\n}\n\n/** PREVIEW */\n.kit-markdown-editor >>> .editor-preview h1,\n.kit-markdown-editor >>> .editor-preview h2,\n.kit-markdown-editor >>> .editor-preview h3 {\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n.kit-markdown-editor >>> .editor-preview p,\n.kit-markdown-editor >>> .editor-preview ul,\n.kit-markdown-editor >>> .editor-preview ol {\n  margin-bottom: 15px;\n}\n\n/** EDIT */\n.kit-markdown-editor >>> .cm-header-1 {\n  margin-top: 0;\n  font-size: 22px;\n}\n.kit-markdown-editor >>> .cm-header-2 {\n  margin-top: 0;\n  font-size: 18px;\n}\n.kit-markdown-editor >>> .cm-header-3 {\n  margin-top: 0;\n  font-size: 16px;\n}\n.kit-markdown-editor >>> .cm-link {\n  color: var(--kit-md-link-text);\n}\n.kit-markdown-editor >>> .cm-url {\n  color: var(--kit-link-color);\n}\n.kit-markdown-editor >>> .CodeMirror-line {\n  color: var(--kit-md-line-text);\n}\n.kit-markdown-editor >>> .CodeMirror {\n  background: var(--kit-page-bg);\n}\n.kit-markdown-editor >>> .editor-preview {\n  background: var(--kit-md-preview-bg);\n  color: var(--kit-md-line-text);\n}\n.kit-markdown-editor[data-has-status-bar='true'] >>> .CodeMirror {\n  border-bottom: none;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n  padding: 5px;\n}\n\n.kit-markdown-editor[data-has-status-bar='true'] >>> .editor-statusbar {\n  border: 1px solid var(--kit-md-status-bar-border);\n  border-top: none;\n  padding: 2px 2px;\n  background: inherit;\n}\n\n/** Editor style cancelling when not editing */\n.kit-markdown-editor[data-readonly='true'] >>> .CodeMirror {\n  border: none !important;\n  padding: 0 !important;\n  background: none;\n}\n.kit-markdown-editor[data-readonly='true'] >>> .editor-preview {\n  position: inherit;\n  background-color: transparent;\n  padding: 0;\n}\n.kit-markdown-editor[data-readonly='true'] >>> .editor-preview p {\n  margin: 0;\n}\n.kit-markdown-editor[data-readonly='true'] >>> .editor-preview p ~ p {\n  margin-top: 10px;\n}\n.kit-markdown-editor[data-readonly='true'] >>> .editor-preview ul {\n  padding-left: 15px;\n}\n.kit-markdown-editor[data-readonly='true'] >>> .editor-statusbar,\n.kit-markdown-editor[data-readonly='true'] >>> .CodeMirror-scroll {\n  display: none;\n}\n.kit-markdown-editor[data-readonly='true'] >>> .CodeMirror-vscrollbar {\n  display: none !important;\n}\n\n.kit-markdown-editor[data-readonly='false'] {\n  margin-bottom: 10px;\n}\n\n.kit-markdown-editor >>> .kit-markdown-editor__status {\n  text-align: left;\n  display: flex;\n  gap: 5px;\n  align-items: flex-end;\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  margin: 0;\n}\n\n.kit-markdown-editor >>> .kit-markdown-editor__status > span {\n  padding-left: 5px;\n  padding-right: 5px;\n  min-width: auto;\n  margin: 0;\n}\n\n.kit-markdown-editor >>> .kit-markdown-editor__error {\n  border-radius: 3px;\n  background-color: var(--kit-md-error-bg);\n  color: var(--kit-md-error-text);\n}\n\n[data-color-mode=\"dark\"] .kit-markdown-editor >>> .easymde-dropdown {\n  background: linear-gradient(to bottom right, var(--kit-md-toolbar-bg) 0%, var(--kit-md-toolbar-bg) 84%,\n    var(--kit-body-text) 50%, var(--kit-body-text) 100%);\n  border: 1px solid var(--kit-md-toolbar-bg);\n  border-radius: 3px;\n}\n\n[data-color-mode=\"dark\"] .kit-markdown-editor >>> .easymde-dropdown:hover {\n  background: linear-gradient(to bottom right, var(--kit-md-tool-hover-bg) 0%, var(--kit-md-tool-hover-bg) 84%,\n    var(--kit-body-text) 50%, var(--kit-body-text) 100%);\n}\n\n[data-color-mode=\"dark\"] .kit-markdown-editor >>> button {\n  border-color: var(--kit-md-tool-border);\n}\n\n[data-color-mode=\"dark\"] .kit-markdown-editor >>> button:hover {\n  background: var(--kit-md-tool-hover-bg);\n}\n\n[data-color-mode=\"dark\"] .kit-markdown-editor >>> button:active {\n  background: var(--kit-md-tool-click-bg);\n}\n\n[data-color-mode=\"dark\"] .kit-markdown-editor >>> button.active:active {\n  background: var(--kit-md-tool-click-bg);\n}\n\n[data-color-mode=\"dark\"] .kit-markdown-editor >>> button.active {\n  background: var(--kit-md-tool-active-bg);\n  color: var(--kit-md-tool-active-text);\n}\n\n[data-color-mode=\"dark\"] .kit-markdown-editor >>> button {\n  color: var(--kit-body-text);\n}\n[data-color-mode=\"dark\"] .kit-markdown-editor >>> .editor-toolbar {\n  background-color: var(--kit-md-toolbar-bg);\n}\n\n[data-color-mode=\"dark\"] .kit-markdown-editor >>> .editor-statusbar {\n  background-color: var(--kit-page-bg);\n}\n\n[data-color-mode=\"dark\"] .kit-markdown-editor >>> .editor-toolbar {\n  border-top: 1px solid var(--kit-md-border);\n  border-left: 1px solid var(--kit-md-border);\n  border-right: 1px solid var(--kit-md-border);\n}\n\n[data-color-mode=\"dark\"] .kit-markdown-editor >>> .CodeMirror {\n  border-top: 1px solid var(--kit-md-border);\n  border-left: 1px solid var(--kit-md-border);\n  border-right: 1px solid var(--kit-md-border);\n}\n\n[data-color-mode=\"dark\"] .kit-markdown-editor >>> .editor-statusbar {\n  border: 1px solid var(--kit-md-border);\n  border-top: none;\n}\n\n[data-color-mode=\"dark\"] .kit-markdown-editor >>> .editor-toolbar i.separator {\n  border-left: 1px solid var(--kit-md-border);\n  border-right: 1px solid transparent;\n}\n\n[data-color-mode=\"dark\"] .kit-markdown-editor >>> .editor-toolbar .easymde-dropdown-content {\n  background-color: var(--kit-md-toolbar-bg);\n\n}\n\n</style>\n"],sourceRoot:""}]);const __WEBPACK_DEFAULT_EXPORT__=___CSS_LOADER_EXPORT___},"./src/components/MarkdownEditor/KitMarkdownEditor.vue":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>KitMarkdownEditor});var vue_esm=__webpack_require__("./node_modules/vue/dist/vue.esm.js"),purify_es=__webpack_require__("./node_modules/dompurify/dist/purify.es.mjs"),easymde=__webpack_require__("./node_modules/easymde/src/js/easymde.js"),easymde_default=__webpack_require__.n(easymde);__webpack_require__("./node_modules/easymde/dist/easymde.min.css");var __awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=function(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return g.next=verb(0),g.throw=verb(1),g.return=verb(2),"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=_.trys,(t=t.length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};const MarkdownEditor_KitMarkdownEditorvue_type_script_setup_true_lang_ts=(0,vue_esm.pM)({__name:"KitMarkdownEditor",props:{value:{default:""},readonly:{type:Boolean,default:!1},placeholder:{default:""},toolbar:{default:function(){return["heading","bold","italic","code","|","unordered-list","ordered-list","|","link","image","|","preview"]}},sizeLimit:null,minHeight:{default:300},dontSanitize:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},blurOnControlEnter:{type:Boolean}},emits:["input","blur","focus","ctrl-enter"],setup:function(__props,_a){var emit=_a.emit,props=__props,me=(0,vue_esm.KR)(),container=(0,vue_esm.KR)(),editor=(0,vue_esm.KR)(),hasStatusBar=(0,vue_esm.KR)(!1);function handleClickOutside(event){if(!props.readonly){var target=event.target;container.value&&(container.value.contains(target)||emit("blur",new FocusEvent("blur")))}}function buildCharacterCounter(limit,propsToolbar){return{className:"kit-markdown-editor__status",onUpdate:function onUpdate(el){var value=editor.value.value(),count=value.length,spans=[];if((null==propsToolbar?void 0:propsToolbar.length)&&!propsToolbar.includes("heading")){var span,issues=[];if(!propsToolbar.includes("heading")&&function hasHeadings(str){return/^ *#/.test(str)||/\n *#/.test(str)}(value)&&issues.push("headings"),issues.length)(span=document.createElement("span")).classList.add("kit-markdown-editor__error"),span.innerText="Some markdown (".concat(issues.join(", "),") might lead to unexpected layouts"),spans.push(span)}limit&&((span=document.createElement("span")).innerText="".concat(count,"/").concat(limit),count>limit&&span.classList.add("kit-markdown-editor__error"),spans.push(span)),spans.length&&el.replaceChildren.apply(el,spans)}}}function onFocus(){emit("focus",new FocusEvent("focus"))}function onChange(){emit("input",editor.value.value().trim())}function onBlur(){emit("focus",new FocusEvent("blur"))}function onKeyUp(a,event){event.ctrlKey&&"Enter"===event.code&&(emit("ctrl-enter"),onBlur())}function updateEditor(){return __awaiter(this,arguments,void 0,function(firstTime){var cm;return void 0===firstTime&&(firstTime=!1),__generator(this,function(_a){switch(_a.label){case 0:return(cm=(0,vue_esm.R1)(editor))&&cm.codemirror?(cm.codemirror.off("change",onChange),cm.codemirror.off("focus",onFocus),cm.codemirror.off("blur",onBlur),document.removeEventListener("click",handleClickOutside,{capture:!0}),props.readonly?[3,1]:(document.addEventListener("click",handleClickOutside,{capture:!0}),cm.codemirror.on("change",onChange),cm.codemirror.on("focus",onFocus),cm.codemirror.on("blur",onBlur),cm.codemirror.on("keyup",onKeyUp),props.autoFocus&&firstTime&&setTimeout(function(){cm.codemirror.focus(),cm.codemirror.setCursor(cm.codemirror.lineCount(),0)},250),[3,3])):[2];case 1:return[4,(0,vue_esm.dY)()];case 2:_a.sent(),cm.isPreviewActive()||easymde_default().togglePreview(cm),_a.label=3;case 3:return cm.codemirror.setOption("readOnly",props.readonly),[2]}})})}return(0,vue_esm.sV)(function(){var toolbar=null;props.readonly||(toolbar=props.toolbar.map(function(item){return"heading"===item?{name:"others",className:"fa fa-header",title:"Headings",children:["heading-1","heading-2","heading-3"]}:item}));var status=[buildCharacterCounter(props.sizeLimit,props.toolbar)];hasStatusBar.value=status.length>0;var minHeight=props.readonly?"1em":"".concat(props.minHeight,"px");editor.value=new(easymde_default())({element:me.value,minHeight,placeholder:props.placeholder,status,spellChecker:!1,toolbar,renderingConfig:{singleLineBreaks:!0,codeSyntaxHighlighting:!0,sanitizerFunction:function(renderedHTML){return props.dontSanitize?renderedHTML:purify_es.A.sanitize(renderedHTML)}}}),editor.value.value(props.value),updateEditor(!0)}),(0,vue_esm.wB)(function(){return props.value},function(){var _a;(null===(_a=editor.value)||void 0===_a?void 0:_a.value().trim())!==props.value.trim()&&editor.value.value(props.value)}),(0,vue_esm.nT)(function(){return updateEditor()}),(0,vue_esm.hi)(function(){document.removeEventListener("click",handleClickOutside,{capture:!0}),editor.value&&(editor.value.cleanup(),editor.value.toTextArea(),editor.value=null)}),{__sfc:!0,props,emit,me,container,editor,hasStatusBar,handleClickOutside,buildCharacterCounter,onFocus,onChange,onBlur,onKeyUp,updateEditor}}});var injectStylesIntoStyleTag=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),injectStylesIntoStyleTag_default=__webpack_require__.n(injectStylesIntoStyleTag),styleDomAPI=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/styleDomAPI.js"),styleDomAPI_default=__webpack_require__.n(styleDomAPI),insertBySelector=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/insertBySelector.js"),insertBySelector_default=__webpack_require__.n(insertBySelector),setAttributesWithoutAttributes=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),setAttributesWithoutAttributes_default=__webpack_require__.n(setAttributesWithoutAttributes),insertStyleElement=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/insertStyleElement.js"),insertStyleElement_default=__webpack_require__.n(insertStyleElement),styleTagTransform=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/style-loader/dist/runtime/styleTagTransform.js"),styleTagTransform_default=__webpack_require__.n(styleTagTransform),KitMarkdownEditorvue_type_style_index_0_id_acf0b81c_prod_scoped_true_lang_css=__webpack_require__("./node_modules/@storybook/builder-webpack5/node_modules/css-loader/dist/cjs.js??clonedRuleSet-11.use[1]!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/vue-loader/lib/index.js??vue-loader-options!./src/components/MarkdownEditor/KitMarkdownEditor.vue?vue&type=style&index=0&id=acf0b81c&prod&scoped=true&lang=css"),options={};options.styleTagTransform=styleTagTransform_default(),options.setAttributes=setAttributesWithoutAttributes_default(),options.insert=insertBySelector_default().bind(null,"head"),options.domAPI=styleDomAPI_default(),options.insertStyleElement=insertStyleElement_default();injectStylesIntoStyleTag_default()(KitMarkdownEditorvue_type_style_index_0_id_acf0b81c_prod_scoped_true_lang_css.A,options);KitMarkdownEditorvue_type_style_index_0_id_acf0b81c_prod_scoped_true_lang_css.A&&KitMarkdownEditorvue_type_style_index_0_id_acf0b81c_prod_scoped_true_lang_css.A.locals&&KitMarkdownEditorvue_type_style_index_0_id_acf0b81c_prod_scoped_true_lang_css.A.locals;const __vuedocgen_export_0=(0,__webpack_require__("./node_modules/vue-loader/lib/runtime/componentNormalizer.js").A)(MarkdownEditor_KitMarkdownEditorvue_type_script_setup_true_lang_ts,function render(){var _c=this._self._c,_setup=this._self._setupProxy;return _c("div",{ref:"container",staticClass:"kit-markdown-editor",attrs:{"data-readonly":this.readonly,"data-has-status-bar":_setup.hasStatusBar}},[_c("textarea",{ref:"me"})])},[],!1,null,"acf0b81c",null).exports,KitMarkdownEditor=__vuedocgen_export_0;__vuedocgen_export_0.__docgenInfo={displayName:"KitMarkdownEditor",description:"",tags:{},events:{},methods:[],slots:{}}},"?b2fd":()=>{}}]);